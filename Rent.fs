\ Rent.fs
INCLUDE ffl/hct.fs

20000 CONSTANT MAX-VALUES
MAX-VALUES HCT-CREATE VALUE-TABLE 

: TO-STRING ( n -- adr,cnt )
    BASE @ SWAP 0 64 BASE ! <# #S #> ROT BASE ! ;

: UPDATE-VALUE ( n,k -- )
    TO-STRING 2DUP 2>R VALUE-TABLE HCT-GET ( n,v,f )
    IF MAX THEN 2R> VALUE-TABLE HCT-INSERT ;

: GET-VALUE ( k -- n,f | false )
    TO-STRING VALUE-TABLE HCT-GET ;

: UPDATE-MAX ( n adr -- )
    DUP @ ROT MAX SWAP ! ;
